- table:
    schema: public
    name: address
  object_relationships:
    - name: city
      using:
        manual_configuration:
          remote_table:
            schema: public
            name: city
          insertion_order: null
          column_mapping:
            city_id: id
    - name: country
      using:
        manual_configuration:
          remote_table:
            schema: public
            name: country
          insertion_order: null
          column_mapping:
            country_id: id
    - name: state
      using:
        manual_configuration:
          remote_table:
            schema: public
            name: state
          insertion_order: null
          column_mapping:
            state_id: id
  insert_permissions:
    - role: manager
      permission:
        check: {}
        columns:
          - lat
          - long
          - neighborhood
          - reference
          - street
          - street_number
          - zip_code
          - city_id
          - country_id
          - state_id
          - created_at
          - updated_at
          - id
        backend_only: false
  select_permissions:
    - role: manager
      permission:
        columns:
          - lat
          - long
          - neighborhood
          - reference
          - street
          - street_number
          - zip_code
          - city_id
          - country_id
          - state_id
          - created_at
          - updated_at
          - id
        filter: {}
- table:
    schema: public
    name: agency
  array_relationships:
    - name: agency_managers
      using:
        foreign_key_constraint_on:
          column: agency_id
          table:
            schema: public
            name: agency_manager
    - name: tours
      using:
        foreign_key_constraint_on:
          column: agency_id
          table:
            schema: public
            name: tour
- table:
    schema: public
    name: agency_manager
  object_relationships:
    - name: agency
      using:
        foreign_key_constraint_on: agency_id
    - name: user
      using:
        foreign_key_constraint_on: user_id
- table:
    schema: public
    name: boarding
  object_relationships:
    - name: address
      using:
        manual_configuration:
          remote_table:
            schema: public
            name: address
          insertion_order: null
          column_mapping:
            address_id: id
    - name: boarding_type
      using:
        foreign_key_constraint_on: type
    - name: tour
      using:
        foreign_key_constraint_on: tour_id
  insert_permissions:
    - role: manager
      permission:
        check: {}
        columns:
          - id
          - created_at
          - updated_at
          - type
          - tour_id
          - date
          - address_id
        backend_only: false
- table:
    schema: public
    name: boarding_type
  array_relationships:
    - name: boardings
      using:
        foreign_key_constraint_on:
          column: type
          table:
            schema: public
            name: boarding
- table:
    schema: public
    name: city
  select_permissions:
    - role: manager
      permission:
        columns:
          - name
          - latitude
          - longitude
          - ibge
          - id
          - state_id
          - lat_lon
          - cod_tom
          - created_at
          - updated_at
        filter: {}
- table:
    schema: public
    name: country
  array_relationships:
    - name: states
      using:
        foreign_key_constraint_on:
          column: country_id
          table:
            schema: public
            name: state
  select_permissions:
    - role: manager
      permission:
        columns:
          - bacen
          - id
          - initials
          - name
          - name_pt
        filter: {}
- table:
    schema: public
    name: document_type
  is_enum: true
  array_relationships:
    - name: people
      using:
        foreign_key_constraint_on:
          column: document_type
          table:
            schema: public
            name: person
- table:
    schema: public
    name: item
  object_relationships:
    - name: tour
      using:
        foreign_key_constraint_on: tour_id
  array_relationships:
    - name: package_items
      using:
        foreign_key_constraint_on:
          column: item_id
          table:
            schema: public
            name: package_item
  insert_permissions:
    - role: manager
      permission:
        check:
          tour:
            agency_id:
              _eq: X-Hasura-Agency-Id
        columns:
          - description
          - name
          - created_at
          - updated_at
          - id
          - tour_id
        backend_only: false
  select_permissions:
    - role: manager
      permission:
        columns:
          - description
          - id
          - name
          - tour_id
        filter:
          tour:
            agency_id:
              _eq: X-Hasura-Agency-Id
- table:
    schema: public
    name: package
  object_relationships:
    - name: tour
      using:
        foreign_key_constraint_on: tour_id
  array_relationships:
    - name: package_accesses
      using:
        foreign_key_constraint_on:
          column: package_id
          table:
            schema: public
            name: package_access
    - name: package_items
      using:
        foreign_key_constraint_on:
          column: package_id
          table:
            schema: public
            name: package_item
    - name: purchases
      using:
        foreign_key_constraint_on:
          column: package_id
          table:
            schema: public
            name: purchase
    - name: reservations
      using:
        foreign_key_constraint_on:
          column: package_id
          table:
            schema: public
            name: reservation
- table:
    schema: public
    name: package_access
  object_relationships:
    - name: package
      using:
        foreign_key_constraint_on: package_id
    - name: purchase
      using:
        foreign_key_constraint_on: purchase_id
  array_relationships:
    - name: travelers
      using:
        foreign_key_constraint_on:
          column: package_access_id
          table:
            schema: public
            name: traveler
- table:
    schema: public
    name: package_item
  object_relationships:
    - name: item
      using:
        foreign_key_constraint_on: item_id
    - name: package
      using:
        foreign_key_constraint_on: package_id
- table:
    schema: public
    name: person
  object_relationships:
    - name: documentTypeByDocumentType
      using:
        foreign_key_constraint_on: document_type
    - name: user
      using:
        foreign_key_constraint_on: user_id
  array_relationships:
    - name: purchases
      using:
        foreign_key_constraint_on:
          column: person_id
          table:
            schema: public
            name: purchase
    - name: reservations
      using:
        foreign_key_constraint_on:
          column: person_id
          table:
            schema: public
            name: reservation
    - name: travelers
      using:
        foreign_key_constraint_on:
          column: person_id
          table:
            schema: public
            name: traveler
- table:
    schema: public
    name: purchase
  object_relationships:
    - name: package
      using:
        foreign_key_constraint_on: package_id
    - name: person
      using:
        foreign_key_constraint_on: person_id
    - name: reservation
      using:
        foreign_key_constraint_on: reservation_id
  array_relationships:
    - name: package_accesses
      using:
        foreign_key_constraint_on:
          column: purchase_id
          table:
            schema: public
            name: package_access
- table:
    schema: public
    name: reservation
  object_relationships:
    - name: package
      using:
        foreign_key_constraint_on: package_id
    - name: person
      using:
        foreign_key_constraint_on: person_id
  array_relationships:
    - name: purchases
      using:
        foreign_key_constraint_on:
          column: reservation_id
          table:
            schema: public
            name: purchase
- table:
    schema: public
    name: state
  object_relationships:
    - name: country
      using:
        foreign_key_constraint_on: country_id
  select_permissions:
    - role: manager
      permission:
        columns:
          - ibge
          - name
          - uf
          - country_id
          - id
          - ddd
          - created_at
          - updated_at
        filter: {}
- table:
    schema: public
    name: tour
  object_relationships:
    - name: address
      using:
        foreign_key_constraint_on: destiny_id
    - name: agency
      using:
        foreign_key_constraint_on: agency_id
    - name: destiny
      using:
        manual_configuration:
          remote_table:
            schema: public
            name: address
          insertion_order: null
          column_mapping:
            destiny_id: id
  array_relationships:
    - name: boardings
      using:
        foreign_key_constraint_on:
          column: tour_id
          table:
            schema: public
            name: boarding
    - name: packages
      using:
        foreign_key_constraint_on:
          column: tour_id
          table:
            schema: public
            name: package
  computed_fields:
    - name: boarding_date
      definition:
        function:
          schema: public
          name: tour_boarding_date
  insert_permissions:
    - role: manager
      permission:
        check:
          agency_id:
            _eq: X-Hasura-Agency-Id
        set:
          agency_id: x-hasura-Agency-Id
        columns:
          - created_at
          - description
          - destiny_id
          - id
          - name
          - status
          - updated_at
        backend_only: false
  select_permissions:
    - role: manager
      permission:
        columns:
          - agency_id
          - description
          - destiny_id
          - id
          - name
          - status
        computed_fields:
          - boarding_date
        filter:
          agency_id:
            _eq: X-Hasura-Agency-Id
- table:
    schema: public
    name: traveler
  object_relationships:
    - name: package_access
      using:
        foreign_key_constraint_on: package_access_id
    - name: person
      using:
        foreign_key_constraint_on: person_id
- table:
    schema: public
    name: user
  object_relationships:
    - name: agency_manager
      using:
        manual_configuration:
          remote_table:
            schema: public
            name: agency_manager
          insertion_order: null
          column_mapping:
            id: user_id
    - name: person
      using:
        manual_configuration:
          remote_table:
            schema: public
            name: person
          insertion_order: null
          column_mapping:
            id: user_id
